see 
https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/testing-with-our-mock-authorisation-service-using-nhs-login---separate-authentication

API Key for client in INT - JE4ESpy5NzFyG5n4U6pKqk8HGXeRjLhZ
(API client must have the "mock-jwks (int Environment)" API added to its list of connected APIs)

curl command to retrieve credentials

curl --location --request GET 'https://int.api.service.nhs.uk/mock-jwks/keycloak-client-credentials' --header 'apikey: JE4ESpy5NzFyG5n4U6pKqk8HGXeRjLhZ'

output for NHS login - {"client_id":"pytest-nhsd-apim","client_secret":"8332c425-d69e-46ef-9241-69998fa81018","redirect_uri":"https://example.org"}

URL to launch for mock authentication

https://identity.ptl.api.platform.nhs.uk/realms/NHS-Login-mock-int/protocol/openid-connect/auth?scope=openid profile&response_type=code&client_id=pytest-nhsd-apim&redirect_uri=https://example.org&login_hint=P9

Browser redirects back with "code" as query param
e.g. ac891127-32f7-45c3-8b73-dc7b5e518e0e.779788bd-6630-442d-888d-191f6b002f15.a22889a8-598c-4df3-84d7-aef718490095

post to /token endpoint to retrieve mock nhs login id token (the get_ping_int.mjs script in the mhdpoc project does this itself)

curl --location --request POST 'https://identity.ptl.api.platform.nhs.uk/realms/NHS-Login-mock-int/protocol/openid-connect/token' \
--header 'Content-Type: application/x-www-form-urlencoded' \
--data-urlencode 'grant_type=authorization_code' \
--data-urlencode 'code=cc12ff34-e928-40fd-b749-cd3d12480f77.779788bd-6630-442d-888d-191f6b002f15.a22889a8-598c-4df3-84d7-aef718490095' \
--data-urlencode 'redirect_uri=https://example.org' \
--data-urlencode 'client_id=pytest-nhsd-apim' \
--data-urlencode 'client_secret=8332c425-d69e-46ef-9241-69998fa81018'

Exchanging NHS login token for access token.
The access token for APIM is issued by a MOCK OAuth2 server - the domain remains the same, but the specific path is different.
The ID Token issued above appears to be pretty short-lived....

see https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation/user-restricted-restful-apis-nhs-login-separate-authentication-and-authorisation#environments-and-testing
for INT the path is "/oauth2-mock/token"
